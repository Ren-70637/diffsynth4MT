# 实验配置更新：从41帧改为81帧

## 🔄 已完成的修改

### 1. 核心配置更新
**文件**: `experiment_utils.py`
```python
# 第56行：修改帧数配置
self.num_frames = 81  # 从41帧改为81帧
```

### 2. GPU工作进程
**文件**: `gpu_worker.py`
- ✅ 已使用`self.manager.num_frames`，会自动采用新的81帧设置
- ✅ negative_prompt已按用户要求更新

### 3. 文档更新
以下文档已更新以反映81帧设置：
- ✅ `EXPERIMENT_SETUP_GUIDE.md`
- ✅ `README_EXPERIMENT.md` 
- ✅ `FINAL_SETUP_SUMMARY.md`

## 📊 新的输出规格

- **分辨率**: 832×480 (保持不变)
- **帧数**: 81帧 (从41帧增加)
- **帧率**: 15 FPS (保持不变)
- **推理步数**: 50步 (保持不变)

## 💾 存储空间影响

**原估算 (41帧)**:
- 单个视频: ~60MB
- 总空间: 580个 × 60MB ≈ 35GB

**新估算 (81帧)**:
- 单个视频: ~120MB (约为原来的2倍)
- 总空间: 580个 × 120MB ≈ 70GB

**建议**: 确保至少有100GB可用存储空间。

## ⚙️ 技术要点

### 帧数限制
WanVideoPipeline要求`num_frames % 4 == 1`，81帧满足此要求：
```
81 % 4 = 1 ✅
```

### 显存影响
- 81帧比41帧需要更多显存
- 已启用`tiled=True`进行分块推理以减少显存峰值
- 建议监控GPU显存使用，必要时可减少并行进程数

### 推理时间
- 81帧的推理时间约为41帧的1.5-2倍
- 预计单个任务从3分钟增加到4-6分钟
- 总实验时间可能从8-10小时增加到12-15小时

## 🚀 启动命令

修改完成后，使用相同的启动命令：

```bash
cd /root/autodl-tmp
./quick_start.sh
```

## 🔍 验证修改

运行以下命令验证配置：

```bash
# 检查实验配置
python experiment_utils.py

# 查看详细概要
python run_experiment.py --action summary
```

## ⚠️ 注意事项

1. **存储空间**: 确保有足够的磁盘空间 (建议100GB+)
2. **显存监控**: 81帧可能增加显存压力，注意监控
3. **时间预期**: 实验完成时间可能延长到12-15小时
4. **质量提升**: 81帧提供更长的视频序列，运动效果更连贯

## 🎯 配置已就绪

所有必要的修改都已完成，现在可以直接启动81帧的实验！

```bash
./quick_start.sh
```
